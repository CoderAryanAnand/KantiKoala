<!DOCTYPE html>
<html lang="de" data-theme-setting="{{ dark_mode_setting }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Page-specific title -->
    <title>{% block title %}KantiKoala{% endblock %}</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{% block description %}KantiKoala - Deine Studienhilfsapp für Schweizer Gymnasiastinnen. Organisiere deinen Stundenplan, verwalte Noten, plane Prüfungen und nutze den Pomodoro-Timer.{% endblock %}">
    <meta name="keywords" content="{% block keywords %}Studienhilfsapp, Schweiz, Gymnasium, Kantonsschule, Noten, Stundenplan, Prüfungen, Pomodoro, Lerntipps, Agenda{% endblock %}">
    <meta name="author" content="KantiKoala">
    <meta name="robots" content="{% block robots %}index, follow{% endblock %}">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{ request.url }}">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:title" content="{% block og_title %}KantiKoala - Deine Studienhilfsapp{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Organisiere deinen Schulalltag mit KantiKoala. Noten, Agenda, Lerntimer und mehr.{% endblock %}">
    <meta property="og:image" content="{{ url_for('static', filename='img/KantiKoalaLogoVar2.png', _external=True) }}">
    <meta property="og:locale" content="de_CH">
    <meta property="og:site_name" content="KantiKoala">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="{% block twitter_title %}KantiKoala - Deine Studienhilfsapp{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}Organisiere deinen Schulalltag mit KantiKoala.{% endblock %}">
    <meta name="twitter:image" content="{{ url_for('static', filename='img/KantiKoalaLogoVar2.png', _external=True) }}">
    
    <!-- Common CSS (Tailwind output) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='output.css') }}">
    
    <!-- Update the favicon link with an ID for JS access -->
    <link id="favicon" rel="shortcut icon" href="{{ url_for('static', filename='img/KantiKoalaLogoVar2.png') }}" data-original-src="{{ url_for('static', filename='img/KantiKoalaLogoVar2.png') }}">
    
    <!-- Page-specific CSS (optional) -->
    {% block extra_css %}{% endblock %}
    
    <!-- Page-specific meta tags (optional) -->
    {% block meta %}{% endblock %}
    
    <!-- Page-specific head content (optional) -->
    {% block head %}{% endblock %}
</head>
<body class="bg-zinc-100 dark:bg-zinc-900 font-sans">
    <!-- Main layout container: flex for sidebar + content on desktop -->
    <div class="md:flex">
        <!-- Sidebar navigation (included as a reusable component) -->
        {% include '_navbar.html' %}

        <!-- Main Content Area -->
        <main class="flex-grow p-4 sm:p-8">
            {% block content %}
            <!-- Page-specific content goes here -->
            {% endblock %}
        </main>
    </div>

    <!-- Footer with Datenschutzerklärung link -->
    <footer class="w-full mt-8 py-4 bg-zinc-200 dark:bg-zinc-800 text-center text-sm text-zinc-600 dark:text-zinc-300">
        <a href="{{ url_for('main.datenschutzerklaerung') }}" class="hover:underline text-blue-600 dark:text-blue-400">
            Datenschutzerklärung
        </a>
    </footer>

    <!-- Common scripts (e.g. dark mode toggle) -->
    <script src="{{ url_for('static', filename='js/darkmode.js') }}"></script>
    
    <!-- Page-specific scripts (optional) -->
    {% block scripts %}{% endblock %}
</body>
</html>